CREATE TABLE REGTITULOSDOCS (
  CODIGO INTEGER NOT NULL,
  NOME VARCHAR(100) NOT NULL,
  DESCRICAO VARCHAR(100),
  DATA DATE DEFAULT current_date,
  USUARIO INTEGER NOT NULL,
  TIPO SMALLINT,
  LIVRO SMALLINT,
  PROTOCOLO INTEGER);
  
  ALTER TABLE REGTITULOSDOCS ADD PRIMARY KEY (CODIGO);
  CREATE GENERATOR GREGTITULOSDOCS;
  SET GENERATOR GREGTITULOSDOCS TO 0;
  CREATE TRIGGER TR_REGTITULOSDOCS FOR REGTITULOSDOCS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.CODIGO = 0) THEN
      NEW.CODIGO = GEN_ID(GREGTITULOSDOCS, 1);
END;

CREATE TABLE IREGTITULOSDOCS (
  CODIGO INTEGER NOT NULL,
  IMAGEM BLOB SEGMENT SIZE 1,
  REGTITULOSDOCS INTEGER NOT NULL);
  ALTER TABLE IREGTITULOSDOCS ADD PRIMARY KEY (CODIGO);
  CREATE GENERATOR GIREGTITULOSDOCS;
  SET GENERATOR GIREGTITULOSDOCS TO 0;
  
  CREATE TRIGGER TR_IREGTITULOSDOCS FOR IREGTITULOSDOCS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF (NEW.CODIGO = 0) THEN
      NEW.CODIGO = GEN_ID(GIREGTITULOSDOCS, 1);
END;

ALTER TABLE IREGTITULOSDOCS ADD CONSTRAINT FK_IREGTITULOSDOCS FOREIGN KEY (REGTITULOSDOCS) REFERENCES REGTITULOSDOCS(CODIGO);
ALTER TABLE REGTITULOSDOCS ADD CONSTRAINT FK_REGTITULOSDOCS FOREIGN KEY (USUARIO) REFERENCES USUARIOS(CODIGO);