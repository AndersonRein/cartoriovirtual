ALTER TABLE CARTORIO ADD SIGLAPRACAEMBRATEL VARCHAR(20);
ALTER TABLE CARTORIO ADD NUMCARTORIO INTEGER;
ALTER TABLE CARTORIO ADD PESSOA SMALLINT;
ALTER TABLE CARTORIO ADD CPFCNPJ VARCHAR(20);
ALTER TABLE CARTORIO ADD FONE VARCHAR(20);
ALTER TABLE CARTORIO ADD EMAIL VARCHAR(100);
ALTER TABLE CARTORIO ADD CEP VARCHAR(20);

CREATE VIEW VPROTESTO(
  CODIGO,
  CADPROTESTO,
  DATA,
  SELO,
  STATUS,
  ACEITE,
  FERJ,
  CODSACADO,
  SACADO,
  CPF_CNPJ,
  ENDERECO,
  NUMERO,
  BAIRRO,
  CEP,
  CIDADESACADO,
  UFSACADO,
  PESSOA,
  LIVRO,
  FOLHA,
  DEVEDOR,
  CPF_CNPJDEVEDOR,
  ENDERECODEVEDOR,
  NUMERODEVEDOR,
  BAIRRODEVEDOR,
  CEPDEVEDOR,
  CIDADEDEVEDOR,
  UFDEVEDOR,
  PESSOADEVEDOR,
  OCORRENCIA,
  VENCIMENTO,
  ESPDOCPROTESTO,
  VALORPROTESTO)
AS
SELECT
  PROTESTO.CODIGO,
  PROTESTO.CADPROTESTO,
  PROTESTO.DATA,
  PROTESTO.SELO,
  PROTESTO.STATUS,
  PROTESTO.ACEITE,
  PROTESTO.FERJ,
  CADPROTESTO.APRESENTANTE AS CODSACADO,
  REGISTROCIVIL.NOME AS SACADO,
  REGISTROCIVIL.CPF_CNPJ AS CPF_CNPJSACADO,
  REGISTROCIVIL.ENDERECO AS ENDERECOSACADO,
  REGISTROCIVIL.NUMERO AS NUMEROSACADO,
  REGISTROCIVIL.BAIRRO AS BAIRROSACADO,
  REGISTROCIVIL.CEP AS CEPSACADO,
  CIDADE.NOME AS CIDADESACADO,
  CIDADE.UF AS UFSACADO,
  REGISTROCIVIL.PESSOA AS PESSOASACADO,
  PROTOCOLO.SEQ AS LIVRO,
  PROTOCOLO.SEQ AS FOLHA,
  (SELECT REGISTROCIVIL.NOME FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS DEVEDOR,
  (SELECT REGISTROCIVIL.CPF_CNPJ FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS CPF_CNPJDEVEDOR,
  (SELECT REGISTROCIVIL.ENDERECO FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS ENDERECODEVEDOR,
  (SELECT REGISTROCIVIL.NUMERO FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS NUMERODEVEDOR,
  (SELECT REGISTROCIVIL.BAIRRO FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS BAIRRODEVEDOR,
  (SELECT REGISTROCIVIL.CEP FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS CEPDEVEDOR,
  (SELECT CIDADE.NOME FROM CIDADE INNER JOIN REGISTROCIVIL ON (REGISTROCIVIL.CIDADE = CIDADE.CODIGO AND REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR )) AS CIDADEDEVEDOR,
  (SELECT CIDADE.UF FROM CIDADE INNER JOIN REGISTROCIVIL ON (REGISTROCIVIL.CIDADE = CIDADE.CODIGO AND REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR )) AS UFDEVEDOR,
  (SELECT REGISTROCIVIL.PESSOA FROM REGISTROCIVIL WHERE REGISTROCIVIL.CODIGO = CADPROTESTO.DEVEDOR) AS PESSOADEVEDOR,
  PROTOCOLO.OCORRENCIA,
  CADPROTESTO.VENCIMENTO,
  TITULOS.SIGLA AS ESPDOCPROTESTO,
  CADPROTESTO.VALORPROTESTO
FROM PROTESTO
INNER JOIN CADPROTESTO ON (CADPROTESTO.CODIGO = PROTESTO.CADPROTESTO)
INNER JOIN REGISTROCIVIL ON (REGISTROCIVIL.CODIGO = CADPROTESTO.APRESENTANTE)
INNER JOIN CIDADE ON (CIDADE.CODIGO = REGISTROCIVIL.CIDADE)
INNER JOIN PROTOCOLO ON (PROTOCOLO.CODIGO = CADPROTESTO.PROTOCOLO)
INNER JOIN TITULOS ON (TITULOS.CODIGO = CADPROTESTO.TITULO)
;